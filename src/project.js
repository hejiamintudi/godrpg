require=function t(n,e,c){function o(r,a){if(!e[r]){if(!n[r]){var s="function"==typeof require&&require;if(!a&&s)return s(r,!0);if(i)return i(r,!0);var u=new Error("Cannot find module '"+r+"'");throw u.code="MODULE_NOT_FOUND",u}var h=e[r]={exports:{}};n[r][0].call(h.exports,function(t){var e=n[r][1][t];return o(e||t)},h,h.exports,t,n,e,c)}return e[r].exports}for(var i="function"==typeof require&&require,r=0;r<c.length;r++)o(c[r]);return o}({DylButton:[function(t,n,e){"use strict";cc._RF.push(n,"a22c3vP6yRIMrelLueTYjq1","DylButton"),cc.Class({extends:cc.Component,properties:{nextScene:"",nextLevel:!1,restart:!1,exitGame:!1,touchFun:{default:null,type:cc.Component.EventHandler}},onLoad:function(){this.myInit()},myInit:function(){var t=this;this.node.on("touchstart",function(n){t.node.color=cc.color(125,125,125),t.node.setScale(1.2)}),this.node.on("touchend",function(n){t.node.color=cc.color(255,255,255),t.node.setScale(1),t.onClick()}),this.node.on("touchcancel",function(n){t.node.setScale(1)})},onClick:function(){if(""!==this.nextScene)return cc.director.loadScene(this.nextScene);if(this.nextLevel){var t=cc.director.getScene().name,n=t.replace(/[^0-9]/gi,""),e=t.split(n);if(1===e.length)return cc.error("这个关卡命名有问题，不是只有一个数字");n=Number(n)+1;var c=e[0]+String(n)+e[1];return cc.director.loadScene(c)}if(this.exitGame){if(cc.sys.isMobile)return cc.director.end()}else if(this.restart)return cc.director.loadScene(cc.director.getScene().name);if(""!==this.touchFun.handler)return this.touchFun.emit()}}),cc._RF.pop()},{}],DylFun:[function(t,n,e){"use strict";cc._RF.push(n,"acff3MfBgJEuaHAETVYsNEg","DylFun"),cc.Class({extends:cc.Component,properties:{nextScene:""},onLoad:function(){cc.log("dylfun"),this.myInit(),cc.director.loadScene(this.nextScene)},myInit:function(){cc.dyl=cc.dyl?cc.dyl:{},cc.dyl.getSize=function(t){var n=(t=t.node?t.node:t).getContentSize(),e=[n.width,n.height],c=e[0],o=e[1];return cc.p(c,o)},cc.dyl.addMap=function(t,n,e){for(var c=[],o=0;o<n;o++){c[o]=[];for(var i=0;i<t;i++)c[o][i]=e?e(cc.p(i,o)):null}return c.w=t,c.h=n,c.get=function(t,n){return!(t.x<0||t.y<0||t.x>=this.w||t.y>=this.h)&&(n&&this[t.y][t.x]?this[t.y][t.x][n]:this[t.y][t.x])},c.set=function(t,n){if(t.x<0||t.y<0||t.x>=this.w||t.y>=this.h)return cc.warn("p不在地图上"),!1;var e=c[t.y][t.x];return c[t.y][t.x]=n,e},c.find=function(t){for(var n=0;n<this.h;n++)for(var e=0;e<this.w;e++)if(this[n][e]===t)return cc.p(e,n);return!1},c.run=function(t){for(var n=[],e=0;e<this.h;e++)for(var c=0;c<this.w;c++){var o=t(cc.p(c,e));(o||0===o)&&n.push(o)}return n},c},cc.dyl.addMapLayer=function(t,n,e){var c=(1-t)*e/2,o=(1-n)*e/2,i=cc.p(c,o),r=this.addMap(t,n,function(t){return i.add(t.mul(e))});r.ori=i.sub(cc.p(e/2,e/2)),r.d=e;var a=function(t){var n=r.w*r.d/2,e=r.h*r.d/2;return t.x>=-n&&t.y>=-e&&t.x<n&&t.y<e};return r.find=function(t){return!!a(t)&&((t=cc.p(t.x,t.y)).subSelf(this.ori),t.mulSelf(1/e),t.x=Math.floor(t.x),t.y=Math.floor(t.y),t)},r},cc.dyl.rand=function(t){"number"!=typeof this.__randNum&&(this.__randNum=1);this.__randNum=(59341*this.__randNum+6541)%9987617;var n=this.__randNum/9987617;return t?Math.floor(n*t):n},cc.dyl.save=function(t,n){n?cc.sys.localStorage.setItem(t,n):cc.sys.localStorage.removeItem(t)},cc.dyl.read=function(t){return cc.sys.localStorage.getItem(t)},cc.dyl.keyOn=function(t){var n={},e={};cc.eventManager.addListener({event:cc.EventListener.KEYBOARD,onKeyPressed:function(c,o){for(var i in t)if(c===cc.KEY[i])return void(n[i]===e[i]&&(t[i](!0),n[i]=!n[i]))},onKeyReleased:function(c,o){for(var i in t)if(c===cc.KEY[i])return t[i](!1),void(e[i]=n[i])}},cc.director.getScene().getChildren()[0])}}}),cc._RF.pop()},{}],DylHpLayer:[function(t,n,e){"use strict";cc._RF.push(n,"9df557lgIVFGpoE72MIEhuk","DylHpLayer"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){var t=this.node.getChildren()[0];t.__lab=t.getComponent(cc.Label),t.active=!1;var n=[],e=[];e.push(t),t.del=function(){this.active=!1,e.push(this);var t=this.__poolId;n[t]=n[n.length-1],n[t].__poolId=t,n.length=n.length-1,this.__poolId=null};var c=function(){var t=null;return e.length<1?t=cc.instantiate(n[0]):(t=e[e.length-1],e.length=e.length-1,t.active=!0),t.__poolId=n.length,n.push(t),t};this.node.add=function(t,n){var e=null;e=(n=Math.floor(n))>0?cc.color(0,255,0):0===n?cc.color(255,255,255):cc.color(255,0,0);var o=c();o.stopAllActions(),o.color=e,o.setPosition(t),o.lab.string=String(n);var i=cc.moveBy(.5,cc.p(0,600)),r=cc.callFunc(function(){o.del()}),a=cc.sequence(i,r);o.runAction(a)}}}),cc._RF.pop()},{}],DylLab:[function(t,n,e){"use strict";cc._RF.push(n,"d2ad54xrzBOh5I7kKstSMWs","DylLab"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){for(var t=this,n=this.node.getChildren(),e=n.length-1;e>=0;e--){(function(){var c=n[e],o=c.name;if(!c.getComponent(cc.Label))return"continue";t.node["__lab"+o]=c.getComponent(cc.Label),void 0!==t.node[o]?t.node["__"+o]=t.node[o]:t.node["__"+o]=t.node["__lab"+o].string,Object.defineProperty(t.node,o,{get:function(){return this["__"+o]},set:function(t){this["__"+o]=t,this["__lab"+o].string=String(this["__"+o])}}),t.node[o]=t.node["__"+o]})()}}}),cc._RF.pop()},{}],DylNode:[function(t,n,e){"use strict";cc._RF.push(n,"05174Vxd8VJP7ZTGe0gGaSV","DylNode"),cc.Class({extends:cc.Component,properties:{rand:0,isBindNode:!1,touch:!1,run:!1},onLoad:function(){this.myInit()},myInit:function(){this.isBindNode&&this.bindNode(cc.director.getScene().getChildren()[0]),this.touch&&this.setTouch(),this.run&&this.setRun(),this.rand&&this.setRand()},bindNode:function(t){"_"===t.name[0]&&(this.node[t.name]=t);for(var n=t.getChildren(),e=n.length-1;e>=0;e--)this.bindNode(n[e])},setTouch:function(){var t=this.node;this.node.touch||(this.node.touch="touch");var n=this.node.touch,e=function(n){var e=n.getLocation();e=cc.p(t.convertToNodeSpace(e));var c=t.getContentSize(),o=[c.width,c.height],i=o[0],r=o[1],a=[i/2,r/2];return i=a[0],r=a[1],e.subSelf(cc.p(i,r)),e.in=function(){for(var t=this.x,n=this.y,e=arguments.length,c=0;c<e;c++)if(function(e){if(!e)return null;var c=[(e=e.node?e.node:e).x,e.y],o=c[0],i=c[1],r=e.getContentSize(),a=[r.width,r.height],s=a[0],u=a[1],h=[s/2,u/2];return s=h[0],u=h[1],s=Math.abs(e.scaleX*s),u=Math.abs(e.scaleY*u),t>=o-s&&t<o+s&&n>=i-u&&n<i+u}(arguments[c]))return arguments[c];return null},e},c={};this.node.on("touchstart",function(o){if(!t.touch)return c=null,null;n=t.touch;var i=e(o);c=t.js[t.touch+"On"]?t.js[t.touch+"On"](i):{}}),this.node.on("touchmove",function(o){if(!c)return null;if(n!==t.touch)return null;var i=e(o);c=t.js[t.touch+"Move"]?t.js[t.touch+"Move"](i,c):{}},this),this.node.on("touchend",function(o){if(!c)return null;if(n!==t.touch)return null;var i=e(o);c=t.js[t.touch+"End"]?t.js[t.touch+"Up"](i,c):t.js[t.touch+"Up"]?t.js[t.touch+"Up"](i,c):{}},this),this.node.on("touchcancel",function(o){if(!c)return null;if(n!==t.touch)return null;var i=e(o);c=t.js[t.touch+"End"]?t.js[t.touch+"Up"](i,c):t.js[t.touch+"Out"]?t.js[t.touch+"Out"](i,c):{}},this)},setRun:function(){var t=this;this.node.run=function(){for(var n=function(){},e=arguments[0],c=function(t,n){return function(){t(),n()}},o=function(n,e){return function(){t.node.js[n](),e()}},i=function(t,n){return function(){var e=t;e.push(function(){return null});for(var c=e.length,o=function(){--c<=0&&n()},i=0;i<e.length;i++)u(e[i],function(){o()})()}},r=function(t,n){return function(){var e=t.node;e.node&&(e=e.node),t.add&&t.add>0?t.easing(cc.easeIn(t.add)):t.add&&t.add<0&&(cc.easeInOut(-t.add),t.easing(cc.easeInOut(-t.add)));var c=cc.callFunc(function(){n()}),o=cc.sequence(t,c);e.runAction(o)}},a=function(t,n){return function(){var c=e;c.node&&(c=c.node),t.add&&t.add>0?t.easing(cc.easeIn(t.add)):t.add&&t.add<0&&(cc.easeInOut(-t.add),t.easing(cc.easeInOut(-t.add)));var o=cc.callFunc(n),i=cc.sequence(t,o);c.runAction(i)}},s=function(t,n){return function(){var c=e;c.node&&(c=c.node);var o=cc.delayTime(t),i=cc.callFunc(n),r=cc.sequence(o,i);c.runAction(r)}},u=function(t,n){return"function"==typeof t?c(t,n):"number"==typeof t?s(t,n):"string"==typeof t?o(t,n):Array.isArray(t)?i(t,n):t.node?r(t,n):a(t,n)},h=arguments.length-1;h>0;h--){var d=arguments[h];n=u(d,n)}n()}},setRand:function(){var t=this.rand;this.node.rand=function(n){var e=(t=(30853*t+253)%4671341)/4671341;return n?Math.floor(e*n):e}}}),cc._RF.pop()},{}],DylPhysicsManager:[function(t,n,e){"use strict";cc._RF.push(n,"2d30fdqVjJFE6woDuz6Tjdk","DylPhysicsManager"),cc.Class({extends:cc.Component,properties:{isEnabled:!0,isShowDebug:!1,gravity:cc.p(0,-320)},onLoad:function(){cc.director.getPhysicsManager().enabled=this.isEnabled,this.isShowDebug?cc.director.getPhysicsManager().debugDrawFlags=cc.PhysicsManager.DrawBits.e_aabbBit|cc.PhysicsManager.DrawBits.e_pairBit|cc.PhysicsManager.DrawBits.e_centerOfMassBit|cc.PhysicsManager.DrawBits.e_jointBit|cc.PhysicsManager.DrawBits.e_shapeBit:cc.director.getPhysicsManager().debugDrawFlags=0,cc.director.getPhysicsManager().gravity=this.gravity}}),cc._RF.pop()},{}],DylPool:[function(t,n,e){"use strict";cc._RF.push(n,"f8c96YqG25HfIMRp4JUB+gt","DylPool"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){var t=this.node.getChildren()[0];t.active=!1;var n=[],e=[];e.push(t),t.del=function(){this.active=!1,e.push(this);var t=this.__poolId;n[t]=n[n.length-1],n[t].__poolId=t,n.length=n.length-1,this.__poolId=null},this.node.add=function(){var t=null;return e.length<1?t=cc.instantiate(n[0]):(t=e[e.length-1],e.length=e.length-1,t.active=!0),t.__poolId=n.length,n.push(t),t},this.node.pool=n}}),cc._RF.pop()},{}],DylTileMap:[function(t,n,e){"use strict";cc._RF.push(n,"05275ZWuvVGMb70smryXw87","DylTileMap"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.myInit()},myInit:function(){var t=this.node.getComponent(cc.TiledMap),n=t.getMapSize(),e=t.getTileSize().width;this.node.map=cc.dyl.addMap(n.width,n.height),this.node.posMap=cc.dyl.addMapLayer(n.width,n.height,e),this.node.add=function(c,o){var i=node.getChildByName(c).getComponent(cc.TiledLayer);if(i){for(var r=i.getLayerSize(),a=i.getMapTileSize().width,s=r.width-1;s>=0;s--)for(var u=r.height-1;u>=0;u--){var h=i.getTileGIDAt(s,r.height-u-1);o(cc.p(s,u),h)}return map.d=a,map}for(var d=(i=t.getObjectGroup(c)).getObjects(),l=d.length-1;l>=0;l--){var p=d[l].x/e,f=d[l].y/e;o(cc.p(p,n.height-f-1),d[l].name)}}}}),cc._RF.pop()},{}],GameInit:[function(t,n,e){"use strict";function c(t){if(Array.isArray(t)){for(var n=0,e=Array(t.length);n<t.length;n++)e[n]=t[n];return e}return Array.from(t)}cc._RF.push(n,"6beb7ifIWNECZeV8+Ftpg+g","GameInit"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.initMap()},initMap:function(){var t=this,n=this.node._map.getChildren(),e=cc.dyl.addMapLayer(5,5,200),o=[].concat(c(this.getMyArr()),c(this.getEnArr()),c(this.getBlockArr())),i=o.length;o.length=25,o.fill(null,i),o.sort(function(){return t.node.rand()-.5});var r=cc.dyl.addMap(5,5,function(t){var c=5*t.y+t.x,i=o[c];return n[c].setPosition(e.get(t)),i&&(i.setPosition(e.get(t)),i.pos=t),i});this.node.map=r,this.node.posMap=e},getMyArr:function(){for(var t=this.node._me.getChildren(),n=t.length-1;n>=0;n--)t[n].team=1;return this.node.myNum=t.length,[].concat(c(t))},getEnArr:function(){for(var t=this.node._en.getChildren(),n=t.length-1;n>=0;n--)t[n].team=-1;return this.node.enNum=t.length,[].concat(c(t))},getBlockArr:function(){for(var t=this.node._block.getChildren(),n=t.length-1;n>=0;n--)t[n].team=0;return[].concat(c(t))}}),cc._RF.pop()},{}],GameMain:[function(t,n,e){"use strict";cc._RF.push(n,"b028a57LqRNZYNUC8VE3WZ7","GameMain"),cc.Class({extends:cc.Component,properties:{},onLoad:function(){this.node.js=this,this.node.canTouch=!0,this.getKeyOn()},getKeyOn:function(){var t=this,n=function(n,e){t.node.canTouch&&n&&t.move(e)},e={w:function(t){return n(t,"w")},s:function(t){return n(t,"s")},a:function(t){return n(t,"a")},d:function(t){return n(t,"d")}};cc.dyl.keyOn(e)},move:function(t){var n=this;this.node.canTouch=!1,this.getMoveData(t);var e=[];this.node.map.run(function(t){var c=n.node.map.get(t);if(c&&c.team&&!c.to.equals(c.pos)){var o=cc.moveTo(.3,n.node.posMap.get(c.to));o.node=c,e.push(o),c.pos=c.to}}),this.node.run(this.node,e,"attack","checkDie")},attack:function(){var t=this;this.node.map.run(function(n){var e=t.node.map.get(n);if(e&&e.team)if(0===e.dis)e.hit&&(e.hit.hp=e.hit.hp>=e.atk?e.hit.hp-e.atk:0);else{var c=[];if(t.node.map.run(function(o){var i=o.sub(n).mag();i>e.dis||0===i||t.node.map.get(o,"team")===-e.team&&c.push(t.node.map.get(o))}),c.length<1)return;c.sort(function(){return t.node.rand()-.5}),c[0].hp=c[0].hp>=e.atk?c[0].hp-e.atk:0}})},checkDie:function(){var t=this;this.node.map.run(function(n){0===t.node.map.get(n,"hp")&&(1===t.node.map.get(n,"team")?t.node.myNum--:t.node.enNum--,t.node.map.get(n).active=!1,t.node.map.set(n,null))}),this.node.myNum&&this.node.enNum?this.node.canTouch=!0:this.node._end.active=!0},getMoveData:function(t){for(var n=this.node.map,e=function(t,e,c){if(n.get(t,"team")===c){var o=n.get(t),i=t.add(e);if(null===n.get(i))n.set(i,o),n.set(t,null),o.hit=null,o.to=i;else{var r=n.get(i);r&&r.team===-o.team?o.hit=r:o.hit=null,o.to=t}}},c=0;c<5;c++)for(var o=0;o<5;o++)"w"===t?this.node.rand()>.5?(e(cc.p(c,4-o),cc.p(0,1),1),e(cc.p(c,o),cc.p(0,-1),-1)):(e(cc.p(c,o),cc.p(0,-1),-1),e(cc.p(c,4-o),cc.p(0,1),1)):"s"===t?this.node.rand()>.5?(e(cc.p(c,o),cc.p(0,-1),1),e(cc.p(c,4-o),cc.p(0,1),-1)):(e(cc.p(c,4-o),cc.p(0,1),-1),e(cc.p(c,o),cc.p(0,-1),1)):"a"===t?this.node.rand()>.5?(e(cc.p(o,c),cc.p(-1,0),1),e(cc.p(4-o,c),cc.p(1,0),-1)):(e(cc.p(4-o,c),cc.p(1,0),-1),e(cc.p(o,c),cc.p(-1,0),1)):"d"===t&&(this.node.rand()>.5?(e(cc.p(4-o,c),cc.p(1,0),1),e(cc.p(o,c),cc.p(-1,0),-1)):(e(cc.p(o,c),cc.p(-1,0),-1),e(cc.p(4-o,c),cc.p(1,0),1)))}}),cc._RF.pop()},{}],Role:[function(t,n,e){"use strict";cc._RF.push(n,"60b53kipOlDMb1h4uSEHgjO","Role"),cc.Class({extends:cc.Component,properties:{hp:20,atk:5,dis:2,isAoe:!1},onLoad:function(){this.node.js=this,this.node.hp=this.hp,this.node.atk=this.atk,this.node.dis=this.dis,this.node.isAoe=this.isAoe}}),cc._RF.pop()},{}]},{},["DylButton","DylFun","DylHpLayer","DylLab","DylNode","DylPhysicsManager","DylPool","DylTileMap","GameInit","GameMain","Role"]);